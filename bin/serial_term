#!/bin/bash
# open a repl terminal on the given port (USB..)

# find directory
dir=$(cd -P -- "$(dirname -- "$0")" && pwd -P)
"$dir/check_dependencies" || exit 1
EXTERNAL="$dir/../external"
VPYTHON="$EXTERNAL/ulnoiot_vp/"
source "$VPYTHON/bin/activate" &>/dev/null

port=$(find_esp_port "$1")

#minicom -D "/dev/tty$port" -b 115000
#miniterm.py --raw "/dev/tty$port" 115000
mpfshell -n -c "open tty$port; repl"