#!/bin/bash
# open a repl terminal on the given port (USB..) or ip address
# $1: suggested port or host
# $2: webrepl password
password="$2"
test "$password" || password="ulnoiot"

# find directory
dir=$(cd -P -- "$(dirname -- "$0")" && pwd -P)
"$dir/check_dependencies" || exit 1
EXTERNAL="$dir/../external"
VPYTHON="$EXTERNAL/ulnoiot_vp/"
source "$VPYTHON/bin/activate" &>/dev/null

port=$(find_esp_port "$1" "$password")

mpfshell --nocache -c "open $port"
